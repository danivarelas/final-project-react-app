{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/web-dev-program/week 7/final-project/src/pages/Transfers/Transfers.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { useHistory } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Axios from 'axios';\nimport TransfersList from '../../components/TransfersList/TransfersList';\n\nconst Transfers = props => {\n  const history = useHistory();\n  const {\n    account\n  } = props;\n  const [transfersOut, setTransfersOut] = useState([]);\n  const [transfersIn, setTransfersIn] = useState([]);\n  const [cookies] = useCookies(['JWT']);\n\n  if (!validate(cookies.JWT)) {\n    history.push(\"/login\");\n  }\n\n  useEffect(() => {\n    const claims = validate(cookies.JWT);\n\n    if (claims) {\n      Axios.get(`http://localhost:8081/api/v1/transfer/byAccountId/${account.id}`, {\n        headers: {\n          JWT: cookies.JWT\n        }\n      }).then(res => {\n        console.log(res.data);\n        setTransfersOut(res.data);\n      }).catch(e => {});\n      Axios.get(`http://localhost:8081/api/v1/transfer/byTargetAccountId/${account.id}`, {\n        headers: {\n          JWT: cookies.JWT\n        }\n      }).then(res => {\n        console.log(res.data);\n        setTransfersIn(res.data);\n      }).catch(e => {});\n    }\n  }, [account, cookies]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(TransfersList, {\n    transfers: transfersOut,\n    account: account,\n    title: \"Outgoing transfers\",\n    emptyMessage: \"You haven't performed any transactions.\",\n    isOutgoing: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(TransfersList, {\n    transfers: transfersIn,\n    account: account,\n    title: \"Incoming transfers\",\n    emptyMessage: \"You haven't received any transactions.\",\n    isOutgoing: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }));\n};\n\nexport default Transfers;","map":{"version":3,"sources":["/Users/user/Desktop/web-dev-program/week 7/final-project/src/pages/Transfers/Transfers.js"],"names":["React","useState","useEffect","useCookies","useHistory","validate","Axios","TransfersList","Transfers","props","history","account","transfersOut","setTransfersOut","transfersIn","setTransfersIn","cookies","JWT","push","claims","get","id","headers","then","res","console","log","data","catch","e"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,8CAA1B;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAEzB,QAAMC,OAAO,GAAGN,UAAU,EAA1B;AAEA,QAAM;AAAEO,IAAAA;AAAF,MAAcF,KAApB;AAEA,QAAM,CAACG,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,EAAD,CAA9C;AAEA,QAAM,CAACe,OAAD,IAAYb,UAAU,CAAC,CAAC,KAAD,CAAD,CAA5B;;AAEA,MAAI,CAACE,QAAQ,CAACW,OAAO,CAACC,GAAT,CAAb,EAA4B;AACxBP,IAAAA,OAAO,CAACQ,IAAR,CAAa,QAAb;AACH;;AAEDhB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMiB,MAAM,GAAGd,QAAQ,CAACW,OAAO,CAACC,GAAT,CAAvB;;AACA,QAAIE,MAAJ,EAAY;AACRb,MAAAA,KAAK,CAACc,GAAN,CAAW,qDAAoDT,OAAO,CAACU,EAAG,EAA1E,EAA6E;AACzEC,QAAAA,OAAO,EAAE;AAAEL,UAAAA,GAAG,EAAED,OAAO,CAACC;AAAf;AADgE,OAA7E,EAEGM,IAFH,CAEQC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACAd,QAAAA,eAAe,CAACW,GAAG,CAACG,IAAL,CAAf;AACH,OALD,EAKGC,KALH,CAKSC,CAAC,IAAI,CACb,CAND;AAOAvB,MAAAA,KAAK,CAACc,GAAN,CAAW,2DAA0DT,OAAO,CAACU,EAAG,EAAhF,EAAmF;AAC/EC,QAAAA,OAAO,EAAE;AAAEL,UAAAA,GAAG,EAAED,OAAO,CAACC;AAAf;AADsE,OAAnF,EAEGM,IAFH,CAEQC,GAAG,IAAI;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACAZ,QAAAA,cAAc,CAACS,GAAG,CAACG,IAAL,CAAd;AACH,OALD,EAKGC,KALH,CAKSC,CAAC,IAAI,CACb,CAND;AAOH;AACJ,GAlBQ,EAkBN,CAAClB,OAAD,EAAUK,OAAV,CAlBM,CAAT;AAoBA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,aAAD;AAAe,IAAA,SAAS,EAAEJ,YAA1B;AAAwC,IAAA,OAAO,EAAED,OAAjD;AAA0D,IAAA,KAAK,EAAE,oBAAjE;AAAuF,IAAA,YAAY,EAAE,yCAArG;AAAgJ,IAAA,UAAU,EAAE,IAA5J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,aAAD;AAAe,IAAA,SAAS,EAAEG,WAA1B;AAAuC,IAAA,OAAO,EAAEH,OAAhD;AAAyD,IAAA,KAAK,EAAE,oBAAhE;AAAsF,IAAA,YAAY,EAAE,wCAApG;AAA8I,IAAA,UAAU,EAAE,KAA1J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ;AAOH,CA1CD;;AA4CA,eAAeH,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { useHistory } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Axios from 'axios';\nimport TransfersList from '../../components/TransfersList/TransfersList';\n\nconst Transfers = (props) => {\n\n    const history = useHistory();\n\n    const { account } = props;\n\n    const [transfersOut, setTransfersOut] = useState([]);\n    const [transfersIn, setTransfersIn] = useState([]);\n\n    const [cookies] = useCookies(['JWT']);\n\n    if (!validate(cookies.JWT)) {\n        history.push(\"/login\");\n    }\n\n    useEffect(() => {\n        const claims = validate(cookies.JWT);\n        if (claims) {\n            Axios.get(`http://localhost:8081/api/v1/transfer/byAccountId/${account.id}`, {\n                headers: { JWT: cookies.JWT }\n            }).then(res => {\n                console.log(res.data)\n                setTransfersOut(res.data);\n            }).catch(e => {\n            });\n            Axios.get(`http://localhost:8081/api/v1/transfer/byTargetAccountId/${account.id}`, {\n                headers: { JWT: cookies.JWT }\n            }).then(res => {\n                console.log(res.data)\n                setTransfersIn(res.data);\n            }).catch(e => {\n            });\n        }\n    }, [account, cookies]);\n\n    return (\n        <div>\n            <TransfersList transfers={transfersOut} account={account} title={\"Outgoing transfers\"} emptyMessage={\"You haven't performed any transactions.\"} isOutgoing={true}/>\n            <TransfersList transfers={transfersIn} account={account} title={\"Incoming transfers\"} emptyMessage={\"You haven't received any transactions.\"} isOutgoing={false}/>\n        </div>\n    );\n\n}\n\nexport default Transfers;\n"]},"metadata":{},"sourceType":"module"}