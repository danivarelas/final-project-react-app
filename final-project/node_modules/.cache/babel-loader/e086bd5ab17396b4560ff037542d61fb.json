{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/web-dev-program/week 7/final-project/src/pages/Payments/Payments.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { useHistory, Link } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Navbar from '../../components/Navbar/Navbar';\nimport './Payments.scss';\nimport Axios from 'axios';\nimport PaymentsChart from '../../components/PaymentsChart/PaymentsChart';\n\nconst Payments = () => {\n  const history = useHistory();\n  const [payments, setPayments] = useState([]);\n  const [services, setServices] = useState([]);\n  const [serviceTypes, setServiceTypes] = useState([]);\n  const [cookies] = useCookies(['JWT']);\n\n  if (!validate(cookies.JWT)) {\n    history.push(\"/login\");\n  }\n\n  useEffect(() => {\n    const claims = validate(cookies.JWT);\n\n    if (claims) {\n      Axios.get(`http://localhost:8081/api/v1/payment/byUserId/${claims.id}`, {\n        headers: {\n          JWT: cookies.JWT\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        setPayments(data);\n      }).catch(e => {});\n      Axios.get(`http://localhost:8081/api/v1/service`, {\n        headers: {\n          JWT: cookies.JWT\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        setServices(data);\n      }).catch(e => {});\n      Axios.get(`http://localhost:8081/api/v1/serviceType`, {\n        headers: {\n          JWT: cookies.JWT\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        setServiceTypes(data);\n      }).catch(e => {});\n    }\n  }, [cookies]);\n  return React.createElement(\"div\", {\n    class: \"wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"All Payments\")), React.createElement(\"div\", {\n    className: \"block-section container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"block-section-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"block-section-header-edit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/payments/payServices\",\n    className: \"btn btn-outline-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Pay Services\")), React.createElement(\"h3\", {\n    className: \"block-section-header-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Monthly Payments Overview\")), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-6 payment-chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"By Service Type\"), React.createElement(PaymentsChart, {\n    chartId: \"chartByType\",\n    payments: payments,\n    serviceTypes: serviceTypes,\n    services: services,\n    isBar: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-lg-6 payment-chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"By Day\"), React.createElement(PaymentsChart, {\n    chartId: \"chartByDate\",\n    payments: payments,\n    serviceTypes: serviceTypes,\n    services: services,\n    isBar: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }))))));\n};\n\nexport default Payments;","map":{"version":3,"sources":["/Users/user/Desktop/web-dev-program/week 7/final-project/src/pages/Payments/Payments.js"],"names":["React","useState","useEffect","useCookies","useHistory","Link","validate","Navbar","Axios","PaymentsChart","Payments","history","payments","setPayments","services","setServices","serviceTypes","setServiceTypes","cookies","JWT","push","claims","get","id","headers","then","res","data","catch","e"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { useHistory, Link } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Navbar from '../../components/Navbar/Navbar';\nimport './Payments.scss'\nimport Axios from 'axios';\nimport PaymentsChart from '../../components/PaymentsChart/PaymentsChart';\n\nconst Payments = () => {\n\n    const history = useHistory();\n\n    const [payments, setPayments] = useState([]);\n    const [services, setServices] = useState([]);\n    const [serviceTypes, setServiceTypes] = useState([]);\n\n    const [cookies] = useCookies(['JWT']);\n\n    if (!validate(cookies.JWT)) {\n        history.push(\"/login\");\n    }\n\n    useEffect(() => {\n        const claims = validate(cookies.JWT);\n        if (claims) {\n            Axios.get(`http://localhost:8081/api/v1/payment/byUserId/${claims.id}`, {\n                headers: { JWT: cookies.JWT }\n            }).then(res => {\n                const { data } = res;\n                setPayments(data);\n            }).catch(e => {\n\n            });\n            Axios.get(`http://localhost:8081/api/v1/service`, {\n                headers: { JWT: cookies.JWT }\n            }).then(res => {\n                const { data } = res;\n                setServices(data);\n            }).catch(e => {\n\n            });\n            Axios.get(`http://localhost:8081/api/v1/serviceType`, {\n                headers: { JWT: cookies.JWT }\n            }).then(res => {\n                const { data } = res;\n                setServiceTypes(data);\n            }).catch(e => {\n\n            });\n        }\n    }, [cookies]);\n\n    return (\n        <div class=\"wrapper\">\n            <div id=\"content\">\n                <Navbar />\n                <div>\n                    <h2 className=\"page-title\">All Payments</h2>\n                </div>\n                <div className=\"block-section container\">\n                    <div className=\"block-section-header\">\n                        <div className=\"block-section-header-edit\">\n                            <Link to=\"/payments/payServices\" className=\"btn btn-outline-secondary\">Pay Services</Link>\n                        </div>\n                        <h3 className=\"block-section-header-text\">Monthly Payments Overview</h3>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 payment-chart\">\n                            <h4>By Service Type</h4>\n                            <PaymentsChart chartId=\"chartByType\" payments={payments} serviceTypes={serviceTypes} services={services} isBar={false}/>\n                        </div>\n                        <div className=\"col-lg-6 payment-chart\">\n                            <h4>By Day</h4>\n                            <PaymentsChart chartId=\"chartByDate\" payments={payments} serviceTypes={serviceTypes} services={services} isBar={true}/>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n    );\n\n}\n\nexport default Payments;"]},"metadata":{},"sourceType":"module"}