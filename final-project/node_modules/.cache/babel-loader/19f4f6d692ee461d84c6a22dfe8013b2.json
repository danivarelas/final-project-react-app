{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/web-dev-program/week 7/final-project/src/components/PaymentsChart/PaymentsChart.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Chart from 'chart.js';\nimport { PieChart, Pie, Sector, Cell, ResponsiveContainer, Legend } from 'recharts';\n\nconst PaymentsChart = props => {\n  const history = useHistory();\n  const {\n    serviceTypes,\n    services,\n    payments,\n    chartId,\n    isUSD\n  } = props; //const [currentDate, setCurrentDate] = useState(new Date());\n\n  if (!validate(sessionStorage.getItem('JWT'))) {\n    history.push(\"/login\");\n  }\n\n  useEffect(() => {\n    if (serviceTypes) {\n      let valuesCRC = [serviceTypes.length];\n      let valuesUSD = [serviceTypes.length];\n      let titles = [serviceTypes.length];\n\n      for (var i = 0; i < serviceTypes.length; i++) {\n        valuesCRC[i] = 0;\n        valuesUSD[i] = 0;\n        titles[i] = serviceTypes[i].serviceTypeName;\n      }\n\n      let paymentsInCRC = [];\n      let paymentsInUSD = [];\n\n      if (payments) {\n        paymentsInCRC = payments.filter(payment => payment.currency === \"CRC\");\n        paymentsInUSD = payments.filter(payment => payment.currency === \"USD\");\n        var j = 0;\n\n        if (paymentsInCRC && paymentsInCRC.length) {\n          for (j = 0; j < paymentsInCRC.length; j++) {\n            let payment = paymentsInCRC[j];\n            let amount = parseFloat(payment.amount);\n            let serviceTypeId = services.filter(service => payment.serviceId === service.id);\n            serviceTypeId = serviceTypeId[0];\n\n            if (serviceTypeId) {\n              serviceTypeId = serviceTypeId.serviceTypeId;\n              valuesCRC[serviceTypeId - 1] = valuesCRC[serviceTypeId - 1] + amount;\n            }\n          }\n        }\n\n        if (paymentsInUSD && paymentsInUSD.length) {\n          for (j = 0; j < paymentsInUSD.length; j++) {\n            let payment = paymentsInUSD[j];\n            let amount = parseFloat(payment.amount);\n            let serviceTypeId = services.filter(service => payment.serviceId === service.id);\n            serviceTypeId = serviceTypeId[0];\n\n            if (serviceTypeId) {\n              serviceTypeId = serviceTypeId.serviceTypeId;\n              valuesUSD[serviceTypeId - 1] = valuesUSD[serviceTypeId - 1] + amount;\n            }\n          }\n        }\n      }\n\n      let data = isUSD ? valuesUSD : valuesCRC;\n      let colors = ['rgba(255, 99, 132, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)', 'rgba(75, 192, 192, 0.8)', 'rgba(153, 102, 255, 0.8)', 'rgba(255, 159, 64, 0.8)'];\n      var context = document.getElementById(chartId); // var myChart = new Chart(context, {\n      //     type: 'doughnut',\n      //     data: {\n      //         labels: titles,\n      //         datasets: [{\n      //             label: 'Total',\n      //             data: data,\n      //             backgroundColor: colors\n      //         }]\n      //     },\n      //     options: { responsive: true}\n      // });\n    }\n  }, [chartId, isUSD, payments, serviceTypes, services]);\n  const data = [{\n    name: 'Group A',\n    value: 400\n  }, {\n    name: 'Group B',\n    value: 300\n  }, {\n    name: 'Group C',\n    value: 300\n  }, {\n    name: 'Group D',\n    value: 200\n  }, {\n    name: 'Group E',\n    value: 278\n  }, {\n    name: 'Group F',\n    value: 189\n  }];\n  const styleLegend = {\n    top: 0,\n    left: \"80%\",\n    lineHeight: '24px'\n  };\n  const stylePie = {\n    top: 0,\n    right: \"80%\"\n  };\n  return React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"85%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(PieChart, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Pie, {\n    data: data,\n    dataKey: \"value\",\n    nameKey: \"name\",\n    cx: \"40%\",\n    cy: \"50%\",\n    innerRadius: 40,\n    outerRadius: 90,\n    fill: \"#82ca9d\",\n    label: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(Legend, {\n    iconSize: 10,\n    layout: \"vertical\",\n    verticalAlign: \"middle\",\n    wrapperStyle: styleLegend,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  })));\n};\n\nexport default PaymentsChart; //<canvas id={chartId}></canvas>","map":{"version":3,"sources":["/Users/user/Desktop/web-dev-program/week 7/final-project/src/components/PaymentsChart/PaymentsChart.js"],"names":["React","useState","useEffect","useHistory","validate","Chart","PieChart","Pie","Sector","Cell","ResponsiveContainer","Legend","PaymentsChart","props","history","serviceTypes","services","payments","chartId","isUSD","sessionStorage","getItem","push","valuesCRC","length","valuesUSD","titles","i","serviceTypeName","paymentsInCRC","paymentsInUSD","filter","payment","currency","j","amount","parseFloat","serviceTypeId","service","serviceId","id","data","colors","context","document","getElementById","name","value","styleLegend","top","left","lineHeight","stylePie","right"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Chart from 'chart.js';\nimport {\n    PieChart, Pie, Sector, Cell, ResponsiveContainer, Legend,\n} from 'recharts';\n\nconst PaymentsChart = (props) => {\n\n    const history = useHistory();\n\n    const { serviceTypes, services, payments, chartId, isUSD } = props;\n    //const [currentDate, setCurrentDate] = useState(new Date());\n\n    if (!validate(sessionStorage.getItem('JWT'))) {\n        history.push(\"/login\");\n    }\n\n    useEffect(() => {\n        if (serviceTypes) {\n            let valuesCRC = [serviceTypes.length];\n            let valuesUSD = [serviceTypes.length];\n            let titles = [serviceTypes.length];\n            for (var i = 0; i < serviceTypes.length; i++) {\n                valuesCRC[i] = 0;\n                valuesUSD[i] = 0;\n                titles[i] = serviceTypes[i].serviceTypeName;\n            }\n            let paymentsInCRC = [];\n            let paymentsInUSD = [];\n            if (payments) {\n                paymentsInCRC = payments.filter((payment) => payment.currency === \"CRC\");\n                paymentsInUSD = payments.filter((payment) => payment.currency === \"USD\");\n                var j = 0;\n\n                if (paymentsInCRC && paymentsInCRC.length) {\n                    for (j = 0; j < paymentsInCRC.length; j++) {\n                        let payment = paymentsInCRC[j];\n                        let amount = parseFloat(payment.amount);\n                        let serviceTypeId = services.filter((service) => payment.serviceId === service.id);\n                        serviceTypeId = serviceTypeId[0];\n                        if (serviceTypeId) {\n                            serviceTypeId = serviceTypeId.serviceTypeId;\n                            valuesCRC[serviceTypeId - 1] = valuesCRC[serviceTypeId - 1] + amount;\n                        }\n                    }\n                }\n\n                if (paymentsInUSD && paymentsInUSD.length) {\n                    for (j = 0; j < paymentsInUSD.length; j++) {\n                        let payment = paymentsInUSD[j];\n                        let amount = parseFloat(payment.amount);\n                        let serviceTypeId = services.filter((service) => payment.serviceId === service.id);\n                        serviceTypeId = serviceTypeId[0];\n                        if (serviceTypeId) {\n                            serviceTypeId = serviceTypeId.serviceTypeId;\n                            valuesUSD[serviceTypeId - 1] = valuesUSD[serviceTypeId - 1] + amount;\n                        }\n                    }\n                }\n            }\n\n            let data = isUSD ? valuesUSD : valuesCRC;\n            let colors = ['rgba(255, 99, 132, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)', 'rgba(75, 192, 192, 0.8)', 'rgba(153, 102, 255, 0.8)', 'rgba(255, 159, 64, 0.8)']\n            var context = document.getElementById(chartId);\n            // var myChart = new Chart(context, {\n            //     type: 'doughnut',\n            //     data: {\n            //         labels: titles,\n            //         datasets: [{\n            //             label: 'Total',\n            //             data: data,\n            //             backgroundColor: colors\n            //         }]\n            //     },\n            //     options: { responsive: true}\n            // });\n\n\n\n        }\n\n    }, [chartId, isUSD, payments, serviceTypes, services]);\n\n    const data = [\n        { name: 'Group A', value: 400 }, { name: 'Group B', value: 300 },\n        { name: 'Group C', value: 300 }, { name: 'Group D', value: 200 },\n        { name: 'Group E', value: 278 }, { name: 'Group F', value: 189 },\n    ];\n    const styleLegend = {\n        top: 0,\n        left: \"80%\",\n        lineHeight: '24px',\n      };\n\n      const stylePie = {\n        top: 0,\n        right: \"80%\"\n      };\n\n    return (\n        <ResponsiveContainer width=\"100%\" height=\"85%\">\n            <PieChart >\n                <Pie data={data} dataKey=\"value\" nameKey=\"name\" cx=\"40%\" cy=\"50%\" innerRadius={40} outerRadius={90} fill=\"#82ca9d\" label/>\n                <Legend iconSize={10} layout=\"vertical\" verticalAlign=\"middle\" wrapperStyle={styleLegend} />\n            </PieChart>\n        </ResponsiveContainer>\n\n    );\n\n}\n\nexport default PaymentsChart;\n\n//<canvas id={chartId}></canvas>"]},"metadata":{},"sourceType":"module"}