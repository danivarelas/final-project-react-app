{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/final-project-react-app/final-project/src/pages/Payments/Payments.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Navbar from '../../components/Navbar/Navbar';\nimport './Payments.scss';\nimport Axios from 'axios';\nimport PaymentsChart from '../../components/PaymentsChart/PaymentsChart';\n\nconst Payments = () => {\n  const history = useHistory();\n  const [payments, setPayments] = useState([]);\n  const [services, setServices] = useState([]);\n  const [serviceTypes, setServiceTypes] = useState([]);\n\n  if (!validate(sessionStorage.getItem('JWT'))) {\n    history.push(\"/login\");\n  }\n\n  useEffect(() => {\n    const token = sessionStorage.getItem('JWT');\n    const claims = validate(token);\n\n    if (claims) {\n      Axios.get(`http://localhost:8081/api/v1/payment/byUserId/${claims.id}`, {\n        headers: {\n          JWT: token\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        setPayments(data);\n      }).catch(e => {});\n      Axios.get(`http://localhost:8081/api/v1/service`, {\n        headers: {\n          JWT: token\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        setServices(data);\n      }).catch(e => {});\n      Axios.get(`http://localhost:8081/api/v1/serviceType`, {\n        headers: {\n          JWT: token\n        }\n      }).then(res => {\n        const {\n          data\n        } = res;\n        setServiceTypes(data);\n      }).catch(e => {});\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    class: \"wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"All Payments\")), React.createElement(\"div\", {\n    className: \"block-section container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"block-section-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"block-section-header-edit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/payments/payServices\",\n    className: \"btn btn-outline-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Pay Services\")), React.createElement(\"h3\", {\n    className: \"block-section-header-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Monthly Payments Overview\")), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-6 payment-chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Spent in CRC\"), React.createElement(PaymentsChart, {\n    chartId: \"totalCRC\",\n    payments: payments,\n    serviceTypes: serviceTypes,\n    services: services,\n    isUSD: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-lg-6 payment-chart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Spent in USD\"), React.createElement(PaymentsChart, {\n    chartId: \"totalUSD\",\n    payments: payments,\n    serviceTypes: serviceTypes,\n    services: services,\n    isUSD: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }))))));\n};\n\nexport default Payments;","map":{"version":3,"sources":["/Users/user/Desktop/final-project-react-app/final-project/src/pages/Payments/Payments.js"],"names":["React","useState","useEffect","useHistory","Link","validate","Navbar","Axios","PaymentsChart","Payments","history","payments","setPayments","services","setServices","serviceTypes","setServiceTypes","sessionStorage","getItem","push","token","claims","get","id","headers","JWT","then","res","data","catch","e"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport validate from '../../utils/JWTParser';\nimport Navbar from '../../components/Navbar/Navbar';\nimport './Payments.scss'\nimport Axios from 'axios';\nimport PaymentsChart from '../../components/PaymentsChart/PaymentsChart';\n\nconst Payments = () => {\n\n    const history = useHistory();\n\n    const [payments, setPayments] = useState([]);\n    const [services, setServices] = useState([]);\n    const [serviceTypes, setServiceTypes] = useState([]);\n\n    if (!validate(sessionStorage.getItem('JWT'))) {\n        history.push(\"/login\");\n    }\n\n    useEffect(() => {\n        const token = sessionStorage.getItem('JWT');\n        const claims = validate(token);\n        if (claims) {\n            Axios.get(`http://localhost:8081/api/v1/payment/byUserId/${claims.id}`, {\n                headers: { JWT: token }\n            }).then(res => {\n                const { data } = res;\n                setPayments(data);\n            }).catch(e => {\n\n            });\n            Axios.get(`http://localhost:8081/api/v1/service`, {\n                headers: { JWT: token }\n            }).then(res => {\n                const { data } = res;\n                setServices(data);\n            }).catch(e => {\n\n            });\n            Axios.get(`http://localhost:8081/api/v1/serviceType`, {\n                headers: { JWT: token }\n            }).then(res => {\n                const { data } = res;\n                setServiceTypes(data);\n            }).catch(e => {\n\n            });\n        }\n    }, []);\n\n    return (\n        <div class=\"wrapper\">\n            <div id=\"content\">\n                <Navbar />\n                <div>\n                    <h2 className=\"page-title\">All Payments</h2>\n                </div>\n                <div className=\"block-section container-fluid\">\n                    <div className=\"block-section-header\">\n                        <div className=\"block-section-header-edit\">\n                            <Link to=\"/payments/payServices\" className=\"btn btn-outline-secondary\">Pay Services</Link>\n                        </div>\n                        <h3 className=\"block-section-header-text\">Monthly Payments Overview</h3>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 payment-chart\">\n                            <h4>Spent in CRC</h4>\n                            <PaymentsChart chartId=\"totalCRC\" payments={payments} serviceTypes={serviceTypes} services={services} isUSD={false}/>\n                        </div>\n                        <div className=\"col-lg-6 payment-chart\">\n                            <h4>Spent in USD</h4>\n                            <PaymentsChart chartId=\"totalUSD\" payments={payments} serviceTypes={serviceTypes} services={services} isUSD={true}/>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n    );\n\n}\n\nexport default Payments;"]},"metadata":{},"sourceType":"module"}